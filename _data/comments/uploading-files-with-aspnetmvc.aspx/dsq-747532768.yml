id: dsq-747532768
date: 2012-07-16T11:59:52.0000000-07:00
author: James
email: james.sutton99@gmail.com
gravatar: edf0ef5561a9f34cb309058df880ddeb
message: <p>Phil,<br>I managed to figure out how to attach a file that already exists in the upload directory without overwriting the previous file. I thought I would update the code I posted last week with code that completely works in MVC 3. Hope this helps everyone else solve this issue!  <br>[Authorize]<br>        public String Uploadfile(HttpPostedFileBase file)<br>        {<br>            if (file != null &amp;&amp; file.ContentLength &gt; 0)<br>            {<br>                var fileName = Path.GetFileName(file.FileName);<br>                var path = Path.Combine(Server.MapPath("~/Uploads"), fileName);<br>                string fileNameWithoutExtension = System.IO.Path.GetFileNameWithoutExtension(file.FileName);<br>                int iteration = 1;<br>                while (System.IO.File.Exists((path)))<br>                {<br>                    fileName = string.Concat(fileNameWithoutExtension, "-", iteration, System.IO.Path.GetExtension(file.FileName));<br>                    path = Path.Combine(Server.MapPath("~/Uploads"), fileName);<br>                    iteration++;<br>                }<br>                file.SaveAs(path);<br>            }<br>            return file.FileName;<br>        }<br></p>
